<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="cbarz">
<meta name="dcterms.date" content="2022-06-09">
<meta name="description" content="A blending model with multiple products which fulfill certain requirements.">

<title>../../blog - Blending models - Food production</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">blog</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Blending models - Food production</h1>
                  <div>
        <div class="description">
          A blending model with multiple products which fulfill certain requirements.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">pyomo</div>
                <div class="quarto-category">modeling</div>
                <div class="quarto-category">blending</div>
                <div class="quarto-category">product mix</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>cbarz </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 9, 2022</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#blending-or-product-mix-problems" id="toc-blending-or-product-mix-problems" class="nav-link active" data-scroll-target="#blending-or-product-mix-problems">Blending or product mix problems</a></li>
  <li><a href="#example---animal-food-production" id="toc-example---animal-food-production" class="nav-link" data-scroll-target="#example---animal-food-production">Example - Animal food production</a></li>
  <li><a href="#example-data" id="toc-example-data" class="nav-link" data-scroll-target="#example-data">Example data</a></li>
  <li><a href="#model" id="toc-model" class="nav-link" data-scroll-target="#model">Model</a>
  <ul class="collapse">
  <li><a href="#sets" id="toc-sets" class="nav-link" data-scroll-target="#sets">sets</a></li>
  <li><a href="#variables" id="toc-variables" class="nav-link" data-scroll-target="#variables">variables</a></li>
  <li><a href="#parameter" id="toc-parameter" class="nav-link" data-scroll-target="#parameter">parameter</a></li>
  <li><a href="#objective" id="toc-objective" class="nav-link" data-scroll-target="#objective">objective</a></li>
  <li><a href="#constraints" id="toc-constraints" class="nav-link" data-scroll-target="#constraints">constraints</a></li>
  <li><a href="#deterministic-model" id="toc-deterministic-model" class="nav-link" data-scroll-target="#deterministic-model">deterministic model</a></li>
  </ul></li>
  <li><a href="#inspect-solution" id="toc-inspect-solution" class="nav-link" data-scroll-target="#inspect-solution">inspect solution</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="blending-or-product-mix-problems" class="level1">
<h1>Blending or product mix problems</h1>
<p>In blending or product mix problems, one tries to mix or extract ingredients subject to quality constraints.</p>
<p>In the following example we have multiple products, differnt raw materials and the products have different production steps.</p>
</section>
<section id="example---animal-food-production" class="level1">
<h1>Example - Animal food production</h1>
<p>We want to produce a predefined quantities of animal foods, namely granules and powder. These product must fulfill certain nutritional requirements and the raw materials - oat, maize and molasses - contain a different percentage of nutritions. Moreover the raw materials have different availablility, prices and enter the production process at different places. Also the production steps have different costs. Our goal is to find the recipie which minimizes the production costs.</p>
<p>This example is from <span class="citation" data-cites="gueret1999applications">(<a href="#ref-gueret1999applications" role="doc-biblioref">Guéret, Prins, and Sevaux 1999, chap. 6.2</a>)</span>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="animal_food.drawio.svg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Animal food production process</figcaption><p></p>
</figure>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pyomo.environ <span class="im">as</span> pyo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="example-data" class="level1">
<h1>Example data</h1>
<p>For our example we consider the following characteristics of the final product and the following raw materials with the the following properties:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'ModelName'</span>: <span class="st">"animal food"</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'requirements'</span>: {</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Proteins'</span>:{</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">'min_content'</span>: <span class="fl">9.5</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">'max_content'</span>: np.NaN,},</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Lipids'</span>:{</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">'min_content'</span>: <span class="fl">2.</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">'max_content'</span>: np.NaN},</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Fiber'</span>:{</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>            <span class="st">'min_content'</span>: <span class="dv">0</span>,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">'max_content'</span>: <span class="fl">6.0</span>}</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>                    },</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'raw_mat'</span>: {</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Oat'</span>:{</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Proteins'</span>: <span class="fl">13.6</span>,</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Lipids'</span>: <span class="fl">7.1</span>,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Fiber'</span>: <span class="fl">7.0</span>,</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>            <span class="st">'availability'</span>: <span class="fl">11900.</span>,</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>            <span class="st">'costs'</span>: <span class="fl">0.13</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>        },</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Maize'</span>:{</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Proteins'</span>: <span class="fl">4.1</span>,</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Lipids'</span>: <span class="fl">2.4</span>,</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Fiber'</span>: <span class="fl">3.7</span>,</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>            <span class="st">'availability'</span>: <span class="fl">23500.</span>,</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>            <span class="st">'costs'</span>: <span class="fl">0.17</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        },</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Molasses'</span>:{</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Proteins'</span>: <span class="fl">5.</span>,</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Lipids'</span>: <span class="fl">0.3</span>,</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Fiber'</span>: <span class="fl">25.0</span>,</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>            <span class="st">'availability'</span>: <span class="fl">750.</span>,</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>            <span class="st">'costs'</span>: <span class="fl">0.12</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>        },</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="st">'prod_cost'</span>: {</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>        <span class="st">'grinding'</span>: <span class="fl">0.25</span>,</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>        <span class="st">'blending'</span>: <span class="fl">0.05</span>, </span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>        <span class="st">'granulating'</span>: <span class="fl">0.42</span>,</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>        <span class="st">'sieving'</span>: <span class="fl">0.17</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    <span class="st">'demand'</span>: {<span class="st">'granule'</span>: <span class="fl">9000.</span>, <span class="st">'powder'</span>:<span class="fl">12000.</span>}</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'requirements'</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>display(pd.DataFrame(data[<span class="st">'requirements'</span>]))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'raw materials'</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>display(pd.DataFrame(data[<span class="st">'raw_mat'</span>]))</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'production cost per kilogram'</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>display(pd.DataFrame({<span class="st">'prod_cost'</span>: {</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'grinding'</span>: <span class="fl">0.25</span>,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">'blending'</span>: <span class="fl">0.05</span>, </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">'granulating'</span>: <span class="fl">0.42</span>,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">'sieving'</span>: <span class="fl">0.17</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    }}))</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'daily product demand in ton'</span>)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>display(pd.DataFrame({<span class="st">'demand'</span>:{<span class="st">'granule'</span>: <span class="fl">9000.</span>, <span class="st">'powder'</span>:<span class="fl">12000.</span>}}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>requirements</code></pre>
</div>
<div class="cell-output cell-output-display">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Proteins</th>
      <th>Lipids</th>
      <th>Fiber</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>min_content</th>
      <td>9.5</td>
      <td>2.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>max_content</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>raw materials</code></pre>
</div>
<div class="cell-output cell-output-display">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Oat</th>
      <th>Maize</th>
      <th>Molasses</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Proteins</th>
      <td>13.60</td>
      <td>4.10</td>
      <td>5.00</td>
    </tr>
    <tr>
      <th>Lipids</th>
      <td>7.10</td>
      <td>2.40</td>
      <td>0.30</td>
    </tr>
    <tr>
      <th>Fiber</th>
      <td>7.00</td>
      <td>3.70</td>
      <td>25.00</td>
    </tr>
    <tr>
      <th>availability</th>
      <td>11900.00</td>
      <td>23500.00</td>
      <td>750.00</td>
    </tr>
    <tr>
      <th>costs</th>
      <td>0.13</td>
      <td>0.17</td>
      <td>0.12</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>production cost per kilogram</code></pre>
</div>
<div class="cell-output cell-output-display">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>prod_cost</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>blending</th>
      <td>0.05</td>
    </tr>
    <tr>
      <th>granulating</th>
      <td>0.42</td>
    </tr>
    <tr>
      <th>grinding</th>
      <td>0.25</td>
    </tr>
    <tr>
      <th>sieving</th>
      <td>0.17</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>daily product demand in ton</code></pre>
</div>
<div class="cell-output cell-output-display">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>demand</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>granule</th>
      <td>9000.0</td>
    </tr>
    <tr>
      <th>powder</th>
      <td>12000.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="model" class="level1">
<h1>Model</h1>
<p>Becacuse we want to know how much raw materials we use per product, we consider decision variables indexed by raw materials and products.</p>
<p>Before we give an algebraic representation of the model, we introduce the relevant problem notions:</p>
<section id="sets" class="level2">
<h2 class="anchored" data-anchor-id="sets">sets</h2>
<ul>
<li><span class="math inline">\(raw\)</span> - set of raw materials</li>
<li><span class="math inline">\(food\)</span> - set of products</li>
<li><span class="math inline">\(comp\)</span> - set of nutritional components</li>
<li><span class="math inline">\(prod\_steps\)</span> - set of production steps</li>
</ul>
</section>
<section id="variables" class="level2">
<h2 class="anchored" data-anchor-id="variables">variables</h2>
<ul>
<li><span class="math inline">\(use_{rf}\)</span> - used quantity of raw material <span class="math inline">\(r\)</span> for food <span class="math inline">\(f\)</span></li>
<li><span class="math inline">\(produced_f\)</span> - produced quantity of food <span class="math inline">\(f\)</span></li>
</ul>
</section>
<section id="parameter" class="level2">
<h2 class="anchored" data-anchor-id="parameter">parameter</h2>
<ul>
<li><span class="math inline">\(cost_r\)</span> - costs of raw material <span class="math inline">\(r\)</span></li>
<li><span class="math inline">\(pcosts\)</span> - costs per production process <span class="math inline">\(p\)</span></li>
<li><span class="math inline">\(minreq_c\)</span> - minimal requirement of component <span class="math inline">\(c\)</span></li>
<li><span class="math inline">\(maxreq_c\)</span> - maximal requirement of component <span class="math inline">\(c\)</span></li>
<li><span class="math inline">\(content_{rc}\)</span> - content of component <span class="math inline">\(c\)</span> in raw material <span class="math inline">\(r\)</span></li>
<li><span class="math inline">\(avail_r\)</span> - maximal available quantity of raw material <span class="math inline">\(r\)</span></li>
<li><span class="math inline">\(demand_f\)</span> - daily demand of food product <span class="math inline">\(f\)</span></li>
</ul>
</section>
<section id="objective" class="level2">
<h2 class="anchored" data-anchor-id="objective">objective</h2>
<ul>
<li>minimize the sum of all cost, whild fulfilling demand and requirements</li>
</ul>
</section>
<section id="constraints" class="level2">
<h2 class="anchored" data-anchor-id="constraints">constraints</h2>
<ul>
<li><span class="math inline">\((c0)\)</span> define the produced quantity of food <span class="math inline">\(f\)</span></li>
<li><span class="math inline">\((c1)\)</span> produce food <span class="math inline">\(f\)</span> is at least as high as the demand for <span class="math inline">\(f\)</span></li>
<li><span class="math inline">\((c2)\)</span> amount of used raw material <span class="math inline">\(r\)</span> can not exceed its availability</li>
<li><span class="math inline">\((c3)\)</span> product <span class="math inline">\(f\)</span> fulfill contain at least minimal amount of component <span class="math inline">\(c\)</span></li>
<li><span class="math inline">\((c4)\)</span> product <span class="math inline">\(f\)</span> fulfill contain at most maximal amount of component <span class="math inline">\(c\)</span></li>
</ul>
</section>
<section id="deterministic-model" class="level2">
<h2 class="anchored" data-anchor-id="deterministic-model">deterministic model</h2>
<p>The optimization problem above is described by the following linear program:</p>
<p><span class="math display">\[
\begin{array}{llll}
\min &amp; \sum_{r,f}cost_r * use_{r,f} &amp; &amp; \\
s.t. &amp; produced_f := \sum_r use_{rf}&amp; \forall f &amp; (c0)\\
     &amp; produced_f \leq demand_f     &amp; \forall f &amp; (c1)\\
     &amp; \sum_f use_{rf} \leq avil_r  &amp; \forall r &amp; (c2)\\
     &amp; \sum_r use_r * content_{rc} \geq minreq_c * produced_f &amp; \forall f,c &amp; (c3)\\
     &amp; \sum_r use_r * content_{rc} \leq maxreq_c * produced_f &amp; \forall f,c &amp; (c4)\\
\end{array}
\]</span></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> animal_food(data):</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    m <span class="op">=</span> pyo.ConcreteModel()</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># sets</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    m.raw <span class="op">=</span> pyo.Set(initialize <span class="op">=</span> data[<span class="st">'raw_mat'</span>].keys(), doc <span class="op">=</span> <span class="st">"raw materials r"</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    m.food <span class="op">=</span> pyo.Set(initialize <span class="op">=</span> data[<span class="st">'demand'</span>].keys(), doc <span class="op">=</span> <span class="st">"products f"</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    m.prod_steps <span class="op">=</span> pyo.Set(initialize <span class="op">=</span> data[<span class="st">'prod_cost'</span>].keys(), doc <span class="op">=</span> <span class="st">'production step ps'</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    m.comp <span class="op">=</span> pyo.Set(initialize <span class="op">=</span> data[<span class="st">'requirements'</span>].keys(), doc <span class="op">=</span> <span class="st">'required components'</span>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># vars</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    m.use <span class="op">=</span> pyo.Var(m.raw, m.food, domain <span class="op">=</span> pyo.NonNegativeReals, doc <span class="op">=</span> <span class="st">"quantity of raw mat r used for product f"</span>)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    m.produced <span class="op">=</span> pyo.Var(m.food, domain <span class="op">=</span> pyo.NonNegativeReals, doc <span class="op">=</span> <span class="st">"produced quantity of food f"</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># vars for output</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    m.food_comp <span class="op">=</span> pyo.Var(m.food, m.comp, domain <span class="op">=</span> pyo.NonNegativeReals, doc <span class="op">=</span> <span class="st">"percentage of component c in  final product f"</span>)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># param</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">@m.Param</span>(m.food, doc <span class="op">=</span> <span class="st">"demand for food f"</span>)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> demand(m,f):</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> data[<span class="st">'demand'</span>][f]</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">@m.Param</span>(m.raw, doc <span class="op">=</span> <span class="st">"available quantity of raw mat r"</span>)</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> avail(m,r):</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> data[<span class="st">'raw_mat'</span>][r][<span class="st">'availability'</span>]</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">@m.Param</span>(m.raw, doc <span class="op">=</span> <span class="st">'cost of raw material r'</span>)</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> cost(m,r):</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> data[<span class="st">'raw_mat'</span>][r][<span class="st">'costs'</span>]</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">@m.Param</span>(m.prod_steps, doc <span class="op">=</span> <span class="st">'cost production step ps'</span>)</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> pcost(m,ps):</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> data[<span class="st">'prod_cost'</span>][ps]</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">@m.Param</span>(m.raw, m.comp)</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> content(m,r,c):</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> data[<span class="st">'raw_mat'</span>][r][c]</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">@m.Param</span>(m.comp, doc <span class="op">=</span> <span class="st">'minimal requirement per component c'</span>)</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> minreq(m,c):</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> data[<span class="st">'requirements'</span>][c][<span class="st">'min_content'</span>]</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Objective</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>    m.mat_cost <span class="op">=</span> pyo.quicksum(m.cost[r] <span class="op">*</span> m.use[r,f] <span class="cf">for</span> r <span class="kw">in</span> m.raw <span class="cf">for</span> f <span class="kw">in</span> m.food)</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>    m.grinding_cost <span class="op">=</span> pyo.quicksum(m.pcost[<span class="st">'grinding'</span>] <span class="op">*</span> m.use[r,f] <span class="cf">for</span> r <span class="kw">in</span> m.raw <span class="cf">for</span> f <span class="kw">in</span> m.food <span class="cf">if</span> f <span class="op">!=</span> <span class="st">'Molasses'</span>)</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>    m.blending_cost <span class="op">=</span> pyo.quicksum(m.pcost[<span class="st">'blending'</span>] <span class="op">*</span> m.use[r,f] <span class="cf">for</span> r <span class="kw">in</span> m.raw <span class="cf">for</span> f <span class="kw">in</span> m.food)</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    m.granul_cost <span class="op">=</span> pyo.quicksum(m.pcost[<span class="st">'granulating'</span>] <span class="op">*</span> m.use[r,<span class="st">'granule'</span>] <span class="cf">for</span> r <span class="kw">in</span> m.raw)</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>    m.siev_cost <span class="op">=</span> pyo.quicksum(m.pcost[<span class="st">'sieving'</span>] <span class="op">*</span> m.use[r,<span class="st">'powder'</span>] <span class="cf">for</span> r <span class="kw">in</span> m.raw)</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>    m.OBJ <span class="op">=</span> pyo.Objective(expr <span class="op">=</span> m.mat_cost <span class="op">+</span> </span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>                          m.grinding_cost <span class="op">+</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>                          m.blending_cost <span class="op">+</span> </span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>                          m.granul_cost <span class="op">+</span> </span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>                          m.siev_cost,</span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>                          sense<span class="op">=</span> pyo.minimize)</span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># constraints</span></span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">@m.Constraint</span>(m.food, doc <span class="op">=</span> <span class="st">"definition of produced"</span>)</span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> c0(m,f):</span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> pyo.quicksum(m.use[r,f] <span class="cf">for</span> r <span class="kw">in</span> m.raw) <span class="op">==</span> m.produced[f]</span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">@m.Constraint</span>(m.food, doc <span class="op">=</span> <span class="st">"fulfill demand"</span>)</span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> c1(m,f):</span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> m.produced[f] <span class="op">&gt;=</span> m.demand[f]</span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">@m.Constraint</span>(m.raw, doc <span class="op">=</span> <span class="st">"dont use more than available"</span>)</span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> c2(m,r):</span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> pyo.quicksum(m.use[r,f] <span class="cf">for</span> f <span class="kw">in</span> m.food) <span class="op">&lt;=</span> m.avail[r]</span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">@m.Constraint</span>(m.food, m.comp, doc <span class="op">=</span> <span class="st">"minimal reuirement fulfilled"</span>)</span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> c3(m,f,c):</span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> pyo.quicksum(m.content[r,c] <span class="op">*</span> m.use[r,f] <span class="cf">for</span> r <span class="kw">in</span> m.raw) <span class="op">&gt;=</span> m.minreq[c] <span class="op">*</span> m.produced[f]</span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>    m.c4 <span class="op">=</span> pyo.ConstraintList(doc <span class="op">=</span> <span class="st">"fulfill maximal requirement"</span>)</span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> f <span class="kw">in</span> m.food:</span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> c <span class="kw">in</span> m.comp:</span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a>            x <span class="op">=</span> data[<span class="st">'requirements'</span>][c][<span class="st">'max_content'</span>]</span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">~</span>np.isnan(x):</span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a>                m.c4.add(pyo.quicksum(m.use[r,f] <span class="op">*</span> m.content[r,c,] <span class="cf">for</span> r <span class="kw">in</span> m.raw) <span class="op">&lt;=</span> x <span class="op">*</span> m.produced[f])</span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">@m.Constraint</span>(m.food, m.comp,</span>
<span id="cb8-73"><a href="#cb8-73" aria-hidden="true" tabindex="-1"></a>                  doc <span class="op">=</span> <span class="st">'defintion of component c in final product f'</span>)</span>
<span id="cb8-74"><a href="#cb8-74" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> c5(m,f,c):</span>
<span id="cb8-75"><a href="#cb8-75" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> pyo.quicksum(m.use[r,f] <span class="op">*</span> m.content[r,c,] <span class="cf">for</span> r <span class="kw">in</span> m.raw) <span class="op">==</span> m.food_comp[f,c]</span>
<span id="cb8-76"><a href="#cb8-76" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-77"><a href="#cb8-77" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-78"><a href="#cb8-78" aria-hidden="true" tabindex="-1"></a>    solver <span class="op">=</span> pyo.SolverFactory(<span class="st">'glpk'</span>)</span>
<span id="cb8-79"><a href="#cb8-79" aria-hidden="true" tabindex="-1"></a>    solver.solve(m)</span>
<span id="cb8-80"><a href="#cb8-80" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-81"><a href="#cb8-81" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="inspect-solution" class="level1">
<h1>inspect solution</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> animal_food(data)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'production costs: '</span> <span class="op">+</span> <span class="bu">str</span>(<span class="bu">round</span>(pyo.value(m.OBJ),<span class="dv">2</span>)))</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>solution <span class="op">=</span>  {<span class="st">'rawmat'</span>: {</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    f:{r: pyo.value(m.use[r,f]) <span class="cf">for</span> r <span class="kw">in</span> m.raw} <span class="cf">for</span> f <span class="kw">in</span> m.food</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>}}</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> f <span class="kw">in</span> m.food:</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    solution[<span class="st">'rawmat'</span>][f].update({c: pyo.value(m.food_comp[f,c]) <span class="cf">for</span> c <span class="kw">in</span> m.comp})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>production costs: 15192.8</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print solution</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(solution[<span class="st">'rawmat'</span>]).T.<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">round</span>(x,<span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Oat</th>
      <th>Maize</th>
      <th>Molasses</th>
      <th>Proteins</th>
      <th>Lipids</th>
      <th>Fiber</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>granule</th>
      <td>5098.56</td>
      <td>3719.53</td>
      <td>181.91</td>
      <td>85500.00</td>
      <td>45181.19</td>
      <td>54000.0</td>
    </tr>
    <tr>
      <th>powder</th>
      <td>6801.44</td>
      <td>4956.53</td>
      <td>242.03</td>
      <td>114031.55</td>
      <td>60258.53</td>
      <td>72000.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-gueret1999applications" class="csl-entry" role="doc-biblioentry">
Guéret, Christelle, Christian Prins, and Marc Sevaux. 1999. <span>“Applications of Optimization with Xpress-MP.”</span> <em>Contract</em>, 00034.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>